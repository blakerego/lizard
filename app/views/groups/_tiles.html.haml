

.row.header
  .logo.col-md-4.col-xs-10
    ZE REP TILES

  / .play.glow_btn.col-md-1.col-xs-1

  .row_above_tiles
    / DO SOME CACHING HERE -  
    - groups = Group.published
    - if groups.count > 1
      %span.groups
        - groups.each do |group| 
          %i.icon-circle{"data-group-id" => "#{group.id}", :class => "album_btn"}

    .icons
      %i.icon-facebook-sign
      %i.icon-twitter
      %i.icon-tumblr
      %i.icon-cloud

  .progress_bar_container
    .progress_bar

= render 'shared/loading'
.tiles_area


.modal{id: "full_tile_modal", "aria-hidden" => true, "tab-index" => "-1"}
  .modal-dialog
    .modal-content
      .modal-body
        = render 'shared/loading'

:javascript
  var media_control = new AUDIO_CONTROL();
  var layout = new TILE_LAYOUT();
  var group_manager = new GROUP_MANAGER();
  var progress_bar = new GROUP_PROGRESS_BAR();
  var resizer = new WINDOW_RESIZER(); 

  $(function() {
    var tile_data = JSON.parse('#{@tiles.to_a.to_json(:methods => :thumb, :except => [ :lyrics])}');
    group_manager.init(tile_data, "#{@group.id}");
    media_control.init(); 
    layout.init(group_manager, media_control);

    $('.loader').hide();
    $('.tiles_area').show();

    progress_bar.init($('.progress_bar'), group_manager, layout);

    resizer.init(); 
    resizer.resize();
  });
